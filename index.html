================================================================================
                     CODE SOURCE COMPLET - APPLICATION ARGILE-B
                    Application d'observation pédagogique pour le développement de l'enfant
================================================================================

================================================================================
1. FICHIER PRINCIPAL - index.html
================================================================================

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta property="og:title" content="ARGILE-B" />
    <meta property="og:description" content="Application d'observation pédagogique pour le développement de l'enfant" />
    <meta
      property="og:image"
      content="https://mocha-cdn.com/og.png"
      type="image/png"
    />
    <meta
      property="og:url"
      content="https://getmocha.com"
    />
    <meta property="og:type" content="website" />
    <meta property="og:author" content="ARGILE-B" />
    <meta property="og:site_name" content="ARGILE-B" />
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:site" content="@argile_b" />
    <meta property="twitter:title" content="ARGILE-B" />
    <meta property="twitter:description" content="Application d'observation pédagogique pour le développement de l'enfant" />
    <meta
      property="twitter:image"
      content="https://mocha-cdn.com/og.png"
      type="image/png"
    />
    <link
      rel="shortcut icon"
      href="https://mocha-cdn.com/favicon.ico"
      type="image/x-icon"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="https://mocha-cdn.com/apple-touch-icon.png"
      type="image/png"
    />
    <title>ARGILE-B</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/react-app/main.tsx"></script>
  </body>
</html>

================================================================================
2. TYPES PARTAGÉS - src/shared/types.ts
================================================================================

import z from "zod";

// Activity field schema
export const ActivityFieldSchema = z.object({
  name: z.string(),
  label: z.string(),
  type: z.enum(['text', 'textarea', 'number']),
  required: z.boolean(),
});

export type ActivityField = z.infer<typeof ActivityFieldSchema>;

// Activity schema
export const ActivitySchema = z.object({
  id: z.string(),
  name: z.string(),
  description: z.string(),
  icon: z.string(),
  fields: z.array(ActivityFieldSchema),
});

export type Activity = z.infer<typeof ActivitySchema>;

// Observation details schema (flexible object)
export const ObservationDetailsSchema = z.record(z.union([z.string(), z.number()]));

export type ObservationDetails = z.infer<typeof ObservationDetailsSchema>;

// Observation schema
export const ObservationSchema = z.object({
  id: z.number().optional(),
  activity_id: z.string(),
  activity_name: z.string(),
  observation_date: z.string(),
  observer_id: z.string(),
  details: ObservationDetailsSchema,
  child_id: z.number(),
  child_name: z.string().optional(),
  created_at: z.string().optional(),
  updated_at: z.string().optional(),
});

export type Observation = z.infer<typeof ObservationSchema>;

// Create observation request schema
export const CreateObservationSchema = z.object({
  activity_id: z.string(),
  observation_date: z.string(),
  details: ObservationDetailsSchema,
  child_id: z.number(),
});

export type CreateObservationRequest = z.infer<typeof CreateObservationSchema>;

// Child profile schema
export const ChildSchema = z.object({
  id: z.number().optional(),
  name: z.string(),
  birth_date: z.string().optional(),
  class_level: z.string().optional(),
  notes: z.string().optional(),
  created_at: z.string().optional(),
  updated_at: z.string().optional(),
});

export type Child = z.infer<typeof ChildSchema>;

// Create child request schema
export const CreateChildSchema = z.object({
  name: z.string().min(1, "Le nom est requis"),
  birth_date: z.string().optional(),
  class_level: z.string().optional(),
  notes: z.string().optional(),
});

export type CreateChildRequest = z.infer<typeof CreateChildSchema>;

================================================================================
3. WORKER BACKEND - src/worker/index.ts
================================================================================

import { Hono } from "hono";
import { cors } from "hono/cors";
import { CreateObservationSchema, CreateChildSchema, type Observation, type Child } from "@/shared/types";
import { ACTIVITIES } from "@/react-app/data/activities";

const app = new Hono<{ Bindings: Env }>();

// Enable CORS for frontend requests
app.use("*", cors());

// Get all observations with child information
app.get("/api/observations", async (c) => {
  try {
    const stmt = c.env.DB.prepare(`
      SELECT o.*, c.name as child_name 
      FROM observations o 
      LEFT JOIN children c ON o.child_id = c.id 
      ORDER BY o.observation_date DESC
    `);
    const { results } = await stmt.all();
    
    const observations: Observation[] = results.map((row: any) => ({
      id: row.id,
      activity_id: row.activity_id,
      activity_name: row.activity_name,
      observation_date: row.observation_date,
      observer_id: row.observer_id,
      details: JSON.parse(row.details),
      child_id: row.child_id,
      child_name: row.child_name,
      created_at: row.created_at,
      updated_at: row.updated_at,
    }));

    return c.json(observations);
  } catch (error) {
    console.error("Error fetching observations:", error);
    return c.json({ error: "Failed to fetch observations" }, 500);
  }
});

// Create a new observation
app.post("/api/observations", async (c) => {
  try {
    const body = await c.req.json();
    const validation = CreateObservationSchema.safeParse(body);
    
    if (!validation.success) {
      return c.json({ error: "Invalid request data", details: validation.error }, 400);
    }

    const { activity_id, observation_date, details, child_id } = validation.data;
    
    // Find the activity to get its name
    const activity = ACTIVITIES.find(a => a.id === activity_id);
    if (!activity) {
      return c.json({ error: "Invalid activity ID" }, 400);
    }

    // Generate a simple observer ID (in a real app, this would come from authentication)
    const observer_id = "observer_" + Math.random().toString(36).substr(2, 9);

    const stmt = c.env.DB.prepare(
      `INSERT INTO observations (activity_id, activity_name, observation_date, observer_id, details, child_id)
       VALUES (?, ?, ?, ?, ?, ?)`
    );

    const result = await stmt.bind(
      activity_id,
      activity.name,
      observation_date,
      observer_id,
      JSON.stringify(details),
      child_id
    ).run();

    if (result.success) {
      return c.json({ 
        id: result.meta.last_row_id,
        message: "Observation created successfully"
      }, 201);
    } else {
      return c.json({ error: "Failed to create observation" }, 500);
    }
  } catch (error) {
    console.error("Error creating observation:", error);
    return c.json({ error: "Internal server error" }, 500);
  }
});

// Delete an observation
app.delete("/api/observations/:id", async (c) => {
  try {
    const id = c.req.param("id");
    
    const stmt = c.env.DB.prepare("DELETE FROM observations WHERE id = ?");
    const result = await stmt.bind(id).run();

    if (result.success) {
      return c.json({ message: "Observation deleted successfully" });
    } else {
      return c.json({ error: "Observation not found" }, 404);
    }
  } catch (error) {
    console.error("Error deleting observation:", error);
    return c.json({ error: "Internal server error" }, 500);
  }
});

// Get activities list
app.get("/api/activities", async (c) => {
  return c.json(ACTIVITIES);
});

// Get all children
app.get("/api/children", async (c) => {
  try {
    const stmt = c.env.DB.prepare("SELECT * FROM children ORDER BY name");
    const { results } = await stmt.all();
    
    const children: Child[] = results.map((row: any) => ({
      id: row.id,
      name: row.name,
      birth_date: row.birth_date,
      class_level: row.class_level,
      notes: row.notes,
      created_at: row.created_at,
      updated_at: row.updated_at,
    }));

    return c.json(children);
  } catch (error) {
    console.error("Error fetching children:", error);
    return c.json({ error: "Failed to fetch children" }, 500);
  }
});

// Create a new child
app.post("/api/children", async (c) => {
  try {
    const body = await c.req.json();
    const validation = CreateChildSchema.safeParse(body);
    
    if (!validation.success) {
      return c.json({ error: "Invalid request data", details: validation.error }, 400);
    }

    const { name, birth_date, class_level, notes } = validation.data;

    const stmt = c.env.DB.prepare(
      `INSERT INTO children (name, birth_date, class_level, notes)
       VALUES (?, ?, ?, ?)`
    );

    const result = await stmt.bind(
      name,
      birth_date || null,
      class_level || null,
      notes || null
    ).run();

    if (result.success) {
      return c.json({ 
        id: result.meta.last_row_id,
        message: "Child profile created successfully"
      }, 201);
    } else {
      return c.json({ error: "Failed to create child profile" }, 500);
    }
  } catch (error) {
    console.error("Error creating child:", error);
    return c.json({ error: "Internal server error" }, 500);
  }
});

// Update a child
app.put("/api/children/:id", async (c) => {
  try {
    const id = c.req.param("id");
    const body = await c.req.json();
    const validation = CreateChildSchema.safeParse(body);
    
    if (!validation.success) {
      return c.json({ error: "Invalid request data", details: validation.error }, 400);
    }

    const { name, birth_date, class_level, notes } = validation.data;

    const stmt = c.env.DB.prepare(
      `UPDATE children 
       SET name = ?, birth_date = ?, class_level = ?, notes = ?, updated_at = CURRENT_TIMESTAMP
       WHERE id = ?`
    );

    const result = await stmt.bind(
      name,
      birth_date || null,
      class_level || null,
      notes || null,
      id
    ).run();

    if (result.success) {
      return c.json({ message: "Child profile updated successfully" });
    } else {
      return c.json({ error: "Child not found" }, 404);
    }
  } catch (error) {
    console.error("Error updating child:", error);
    return c.json({ error: "Internal server error" }, 500);
  }
});

// Delete a child
app.delete("/api/children/:id", async (c) => {
  try {
    const id = c.req.param("id");
    
    const stmt = c.env.DB.prepare("DELETE FROM children WHERE id = ?");
    const result = await stmt.bind(id).run();

    if (result.success) {
      return c.json({ message: "Child profile deleted successfully" });
    } else {
      return c.json({ error: "Child not found" }, 404);
    }
  } catch (error) {
    console.error("Error deleting child:", error);
    return c.json({ error: "Internal server error" }, 500);
  }
});

export default app;

================================================================================
4. APPLICATION REACT PRINCIPALE - src/react-app/main.tsx
================================================================================

import { StrictMode } from "react";
import { createRoot } from "react-dom/client";
import "@/react-app/index.css";
import App from "@/react-app/App.tsx";

createRoot(document.getElementById("root")!).render(
  <StrictMode>
    <App />
  </StrictMode>
);

================================================================================
5. ROUTEUR PRINCIPAL - src/react-app/App.tsx
================================================================================

import { BrowserRouter as Router, Routes, Route } from "react-router";
import HomePage from "@/react-app/pages/Home";

export default function App() {
  return (
    <Router>
      <Routes>
        <Route path="/" element={<HomePage />} />
      </Routes>
    </Router>
  );
}

================================================================================
6. STYLES PRINCIPAUX - src/react-app/index.css
================================================================================

@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

:root {
  font-family: 'Inter', system-ui, Avenir, Helvetica, Arial, sans-serif;
}

body {
  background-color: #f7f9fb;
}

/* Print styles */
@media print {
  .no-print {
    display: none !important;
  }
  
  .observation-card {
    page-break-inside: avoid;
    background-color: #fff;
    border: 1px solid #e2e8f0;
    margin-bottom: 12px;
    padding: 16px;
    border-radius: 8px;
  }
  
  body {
    background-color: #ffffff;
  }
}

================================================================================
7. PAGE PRINCIPALE - src/react-app/pages/Home.tsx
================================================================================

import { useState } from 'react';
import { FileText, Plus } from 'lucide-react';

import Layout from '@/react-app/components/Layout';
import ActivityCard from '@/react-app/components/ActivityCard';
import ObservationForm from '@/react-app/components/ObservationForm';

import ObservationCatalog from '@/react-app/components/ObservationCatalog';
import ChildProfileForm from '@/react-app/components/ChildProfileForm';
import ChildProfileCard from '@/react-app/components/ChildProfileCard';
import Modal from '@/react-app/components/Modal';

import { ACTIVITIES } from '@/react-app/data/activities';
import { useObservations } from '@/react-app/hooks/useObservations';
import { useChildren } from '@/react-app/hooks/useChildren';
import { Activity, CreateObservationRequest, CreateChildRequest, Child } from '@/shared/types';

type View = 'activites' | 'catalogue' | 'profils' | 'form' | 'childForm';

interface ModalState {
  isOpen: boolean;
  title: string;
  message: string;
  actions: Array<{
    text: string;
    onClick: () => void;
    style: string;
  }>;
}

export default function Home() {
  const [currentView, setCurrentView] = useState<View>('activites');
  const [selectedActivity, setSelectedActivity] = useState<Activity | null>(null);
  const [selectedChild, setSelectedChild] = useState<Child | null>(null);
  const [modal, setModal] = useState<ModalState>({
    isOpen: false,
    title: '',
    message: '',
    actions: []
  });

  const { observations, loading, error, createObservation, deleteObservation } = useObservations();
  const { 
    children, 
    loading: childrenLoading, 
    error: childrenError, 
    createChild, 
    updateChild, 
    deleteChild 
  } = useChildren();

  const showModal = (title: string, message: string, actions: ModalState['actions']) => {
    setModal({ isOpen: true, title, message, actions });
  };

  const hideModal = () => {
    setModal(prev => ({ ...prev, isOpen: false }));
  };

  const handleActivitySelect = (activity: Activity) => {
    setSelectedActivity(activity);
    setCurrentView('form');
  };

  const handleObservationSubmit = async (observation: CreateObservationRequest) => {
    const success = await createObservation(observation);
    
    if (success) {
      showModal(
        'Succès!', 
        "L'observation a été enregistrée avec succès.", 
        [
          {
            text: 'Ajouter une autre',
            onClick: () => { hideModal(); setCurrentView('activites'); },
            style: 'bg-indigo-600 hover:bg-indigo-700'
          },
          {
            text: 'Voir le catalogue',
            onClick: () => { hideModal(); setCurrentView('catalogue'); },
            style: 'bg-gray-400 hover:bg-gray-500'
          }
        ]
      );
    } else {
      showModal(
        "Erreur d'Enregistrement",
        "Désolé, une erreur est survenue lors de l'enregistrement de votre observation.",
        [{ text: 'OK', onClick: hideModal, style: 'bg-red-500 hover:bg-red-600' }]
      );
    }
    
    return success;
  };

  const handleChildSubmit = async (childData: CreateChildRequest) => {
    const success = selectedChild 
      ? await updateChild(selectedChild.id!, childData)
      : await createChild(childData);
    
    if (success) {
      showModal(
        'Succès!', 
        selectedChild 
          ? 'Le profil a été modifié avec succès.'
          : 'Le profil de l\'enfant a été créé avec succès.', 
        [
          {
            text: 'Continuer',
            onClick: () => { hideModal(); setCurrentView('profils'); },
            style: 'bg-indigo-600 hover:bg-indigo-700'
          }
        ]
      );
      setSelectedChild(null);
    } else {
      showModal(
        'Erreur',
        'Désolé, une erreur est survenue lors de l\'enregistrement du profil.',
        [{ text: 'OK', onClick: hideModal, style: 'bg-red-500 hover:bg-red-600' }]
      );
    }
    
    return success;
  };

  const handleDeleteChild = (childId: number, childName: string) => {
    showModal(
      'Confirmer la Suppression',
      `Êtes-vous sûr de vouloir supprimer le profil de ${childName}? Cette action supprimera aussi toutes les observations associées.`,
      [
        {
          text: 'Supprimer',
          onClick: async () => {
            hideModal();
            await deleteChild(childId);
          },
          style: 'bg-red-600 hover:bg-red-700'
        },
        {
          text: 'Annuler',
          onClick: hideModal,
          style: 'bg-gray-400 hover:bg-gray-500'
        }
      ]
    );
  };

  const handleDeleteObservation = (observationId: number) => {
    showModal(
      'Confirmer la Suppression',
      'Êtes-vous sûr de vouloir supprimer cette observation? Cette action est irréversible.',
      [
        {
          text: 'Supprimer',
          onClick: async () => {
            hideModal();
            await deleteObservation(observationId);
          },
          style: 'bg-red-600 hover:bg-red-700'
        },
        {
          text: 'Annuler',
          onClick: hideModal,
          style: 'bg-gray-400 hover:bg-gray-500'
        }
      ]
    );
  };

  const handlePrintReport = () => {
    window.print();
  };

  const renderContent = () => {
    if (loading || childrenLoading) {
      return (
        <div className="flex items-center justify-center min-h-64">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"></div>
        </div>
      );
    }

    if (error || childrenError) {
      return (
        <div className="text-center p-8">
          <p className="text-red-600 mb-4">Erreur: {error || childrenError}</p>
          <button 
            onClick={() => window.location.reload()}
            className="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition duration-150"
          >
            Réessayer
          </button>
        </div>
      );
    }

    if (currentView === 'form' && selectedActivity) {
      return (
        <ObservationForm
          activity={selectedActivity}
          onSubmit={handleObservationSubmit}
          onBack={() => setCurrentView('activites')}
          children={children}
        />
      );
    }

    if (currentView === 'childForm') {
      return (
        <ChildProfileForm
          child={selectedChild || undefined}
          onSubmit={handleChildSubmit}
          onBack={() => setCurrentView('profils')}
          isEditing={!!selectedChild}
        />
      );
    }

    if (currentView === 'profils') {
      return (
        <div>
          <div className="flex justify-between items-center mb-6">
            <h1 className="text-3xl font-extrabold text-gray-900 flex items-center">
              Profils d'Enfants
              <span className="ml-4 text-base font-semibold text-green-600 bg-green-100 px-3 py-1 rounded-full">
                {children.length} profils
              </span>
            </h1>
            
            <button
              onClick={() => {
                setSelectedChild(null);
                setCurrentView('childForm');
              }}
              className="bg-green-600 text-white p-2 px-4 rounded-lg font-semibold shadow-md hover:bg-green-700 transition duration-150 flex items-center"
            >
              <Plus className="w-4 h-4 mr-2" />
              Nouveau Profil
            </button>
          </div>
          
          {children.length === 0 ? (
            <div className="text-center p-12 bg-gray-50 rounded-lg">
              <p className="text-gray-500 mb-4">Aucun profil d'enfant n'a encore été créé.</p>
              <button
                onClick={() => {
                  setSelectedChild(null);
                  setCurrentView('childForm');
                }}
                className="bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition duration-150"
              >
                Créer le premier profil
              </button>
            </div>
          ) : (
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
              {children.map((child) => (
                <ChildProfileCard
                  key={child.id}
                  child={child}
                  onEdit={() => {
                    setSelectedChild(child);
                    setCurrentView('childForm');
                  }}
                  onDelete={() => handleDeleteChild(child.id!, child.name)}
                />
              ))}
            </div>
          )}
        </div>
      );
    }

    if (currentView === 'catalogue') {
      return (
        <div>
          <div className="flex justify-between items-center mb-6">
            <h1 className="text-3xl font-extrabold text-gray-900 flex items-center">
              Catalogue d'Observations
              <span className="ml-4 text-base font-semibold text-indigo-600 bg-indigo-100 px-3 py-1 rounded-full">
                {observations.length} entrées
              </span>
            </h1>
            
            <button
              onClick={handlePrintReport}
              className="no-print bg-green-600 text-white p-2 px-4 rounded-lg font-semibold shadow-md hover:bg-green-700 transition duration-150 flex items-center"
            >
              <FileText className="w-4 h-4 mr-2" />
              Générer Rapport PDF
            </button>
          </div>
          
          <div id="report-content">
            {observations.length === 0 ? (
              <p className="text-gray-500 italic p-8 bg-gray-50 rounded-lg text-center">
                Aucune observation n'a encore été enregistrée. Commencez par créer une activité!
              </p>
            ) : (
              <ObservationCatalog
                observations={observations}
                activities={ACTIVITIES}
                children={children}
                onDeleteObservation={handleDeleteObservation}
              />
            )}
          </div>
        </div>
      );
    }

    // Default: Activity selection
    return (
      <div>
        <h1 className="text-3xl font-extrabold text-gray-900 mb-6">
          Sélectionnez un Domaine d'Observation
        </h1>
        <p className="text-lg text-gray-600 mb-8">
          Choisissez le domaine de développement que vous souhaitez documenter.
        </p>
        
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {ACTIVITIES.map((activity) => (
            <ActivityCard
              key={activity.id}
              activity={activity}
              onClick={() => handleActivitySelect(activity)}
            />
          ))}
        </div>
      </div>
    );
  };

  return (
    <>
      <Layout
        currentView={currentView === 'form' ? 'activites' : (currentView === 'childForm' ? 'profils' : currentView)}
        onViewChange={(view) => setCurrentView(view)}
        observationCount={observations.length}
        childrenCount={children.length}
      >
        {renderContent()}
      </Layout>

      <Modal
        isOpen={modal.isOpen}
        title={modal.title}
        message={modal.message}
        actions={modal.actions}
        onClose={hideModal}
      />

      <style>{`
        @media print {
          .no-print {
            display: none !important;
          }
          .observation-card {
            page-break-inside: avoid;
            margin-bottom: 12px;
          }
        }
      `}</style>
    </>
  );
}

================================================================================
8. COMPOSANT LAYOUT - src/react-app/components/Layout.tsx
================================================================================

import { ReactNode } from 'react';
import { CloudOff, Sprout } from 'lucide-react';

interface LayoutProps {
  children: ReactNode;
  currentView: 'activites' | 'catalogue' | 'profils';
  onViewChange: (view: 'activites' | 'catalogue' | 'profils') => void;
  observationCount?: number;
  childrenCount?: number;
}

export default function Layout({ children, currentView, onViewChange, observationCount = 0, childrenCount = 0 }: LayoutProps) {
  const isOnline = navigator.onLine;

  return (
    <div className="min-h-screen flex flex-col bg-gray-50">
      {/* Offline Indicator */}
      {!isOnline && (
        <div className="fixed top-4 right-4 bg-red-600 text-white p-2 rounded-full shadow-xl z-50 flex items-center justify-center space-x-2 transition duration-300 transform hover:scale-105" title="Mode Hors Ligne">
          <CloudOff className="w-6 h-6" />
        </div>
      )}

      {/* Navigation Bar */}
      <nav className="bg-white shadow-md sticky top-0 z-10">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-center h-16">
            {/* Logo/Title */}
            <div className="flex-shrink-0 flex items-center">
              <Sprout className="w-7 h-7 text-indigo-600 mr-3" />
              <span className="text-2xl font-extrabold text-gray-900">
                ARGILE-<span className="text-indigo-600">B</span>
              </span>
            </div>
            
            {/* Navigation Links */}
            <div className="flex space-x-6">
              <button
                onClick={() => onViewChange('profils')}
                className={`px-3 py-2 text-sm font-medium transition duration-150 ${
                  currentView === 'profils'
                    ? 'text-indigo-600 font-semibold border-b-2 border-indigo-600'
                    : 'text-gray-500 hover:text-indigo-600'
                }`}
              >
                Profils d'Enfants
                {childrenCount > 0 && (
                  <span className="ml-2 text-xs bg-green-100 text-green-600 px-2 py-1 rounded-full">
                    {childrenCount}
                  </span>
                )}
              </button>
              <button
                onClick={() => onViewChange('activites')}
                className={`px-3 py-2 text-sm font-medium transition duration-150 ${
                  currentView === 'activites'
                    ? 'text-indigo-600 font-semibold border-b-2 border-indigo-600'
                    : 'text-gray-500 hover:text-indigo-600'
                }`}
              >
                Activités
              </button>
              <button
                onClick={() => onViewChange('catalogue')}
                className={`px-3 py-2 text-sm font-medium transition duration-150 ${
                  currentView === 'catalogue'
                    ? 'text-indigo-600 font-semibold border-b-2 border-indigo-600'
                    : 'text-gray-500 hover:text-indigo-600'
                }`}
              >
                Catalogue d'Observations
                {observationCount > 0 && (
                  <span className="ml-2 text-xs bg-indigo-100 text-indigo-600 px-2 py-1 rounded-full">
                    {observationCount}
                  </span>
                )}
              </button>
            </div>
          </div>
        </div>
      </nav>

      {/* Main Content */}
      <main className="flex-grow p-4 sm:p-6 lg:p-8">
        {children}
      </main>
    </div>
  );
}

================================================================================
9. COMPOSANT ACTIVITY CARD - src/react-app/components/ActivityCard.tsx
================================================================================

import { Activity } from '@/shared/types';
import { getActivityColors } from '@/react-app/utils/activityColors';

interface ActivityCardProps {
  activity: Activity;
  onClick: () => void;
}

export default function ActivityCard({ activity, onClick }: ActivityCardProps) {
  const colors = getActivityColors(activity.id);
  
  return (
    <div
      onClick={onClick}
      className={`${colors.bg} p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-1 cursor-pointer ${colors.border} border-2 ${colors.hoverBg}`}
    >
      <div 
        className={`${colors.iconColor} mb-3`}
        dangerouslySetInnerHTML={{ __html: activity.icon }}
      />
      <h2 className="text-xl font-bold text-gray-900 mb-2">{activity.name}</h2>
      <p className={colors.text}>{activity.description}</p>
    </div>
  );
}

================================================================================
10. COMPOSANT CHILD PROFILE CARD - src/react-app/components/ChildProfileCard.tsx
================================================================================

import { Edit, Trash2, User } from 'lucide-react';
import { Child } from '@/shared/types';

interface ChildProfileCardProps {
  child: Child;
  onEdit: () => void;
  onDelete: () => void;
}

export default function ChildProfileCard({ child, onEdit, onDelete }: ChildProfileCardProps) {
  const calculateAge = (birthDate: string) => {
    if (!birthDate) return null;
    const today = new Date();
    const birth = new Date(birthDate);
    const ageInYears = today.getFullYear() - birth.getFullYear();
    const monthDiff = today.getMonth() - birth.getMonth();
    
    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {
      return ageInYears - 1;
    }
    return ageInYears;
  };

  const formatDate = (dateString: string) => {
    if (!dateString) return '';
    return new Date(dateString).toLocaleDateString('fr-FR');
  };

  const age = child.birth_date ? calculateAge(child.birth_date) : null;

  return (
    <div className="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-1 border border-gray-200">
      <div className="flex items-start justify-between mb-4">
        <div className="flex items-center">
          <div className="bg-indigo-100 p-3 rounded-full mr-4">
            <User className="w-6 h-6 text-indigo-600" />
          </div>
          <div>
            <h3 className="text-xl font-bold text-gray-900">{child.name}</h3>
            {age !== null && (
              <p className="text-sm text-gray-500">{age} ans</p>
            )}
          </div>
        </div>
        <div className="flex space-x-2">
          <button
            onClick={onEdit}
            className="text-blue-500 hover:text-blue-700 p-1 rounded-full transition duration-150"
            title="Modifier"
          >
            <Edit className="w-4 h-4" />
          </button>
          <button
            onClick={onDelete}
            className="text-red-500 hover:text-red-700 p-1 rounded-full transition duration-150"
            title="Supprimer"
          >
            <Trash2 className="w-4 h-4" />
          </button>
        </div>
      </div>

      <div className="space-y-2 text-sm">
        {child.birth_date && (
          <p>
            <span className="font-medium text-gray-700">Naissance:</span>{' '}
            <span className="text-gray-600">{formatDate(child.birth_date)}</span>
          </p>
        )}
        {child.class_level && (
          <p>
            <span className="font-medium text-gray-700">Classe:</span>{' '}
            <span className="text-gray-600">{child.class_level}</span>
          </p>
        )}
        {child.notes && (
          <p>
            <span className="font-medium text-gray-700">Notes:</span>{' '}
            <span className="text-gray-600">{child.notes}</span>
          </p>
        )}
      </div>

      {!child.birth_date && !child.class_level && !child.notes && (
        <p className="text-gray-400 italic text-sm">Aucune information complémentaire</p>
      )}
    </div>
  );
}

================================================================================
11. COMPOSANT CHILD PROFILE FORM - src/react-app/components/ChildProfileForm.tsx
================================================================================

import { useState } from 'react';
import { ArrowLeft } from 'lucide-react';
import { Child, CreateChildRequest } from '@/shared/types';

interface ChildProfileFormProps {
  child?: Child;
  onSubmit: (child: CreateChildRequest) => Promise<boolean>;
  onBack: () => void;
  isEditing?: boolean;
}

export default function ChildProfileForm({ child, onSubmit, onBack, isEditing = false }: ChildProfileFormProps) {
  const [formData, setFormData] = useState<CreateChildRequest>({
    name: child?.name || '',
    birth_date: child?.birth_date || '',
    class_level: child?.class_level || '',
    notes: child?.notes || '',
  });
  const [isSubmitting, setIsSubmitting] = useState(false);

  const handleInputChange = (field: keyof CreateChildRequest, value: string) => {
    setFormData(prev => ({
      ...prev,
      [field]: value
    }));
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    
    setIsSubmitting(true);
    const success = await onSubmit(formData);
    
    if (success) {
      if (!isEditing) {
        // Reset form on successful creation
        setFormData({
          name: '',
          birth_date: '',
          class_level: '',
          notes: '',
        });
      }
    }
    
    setIsSubmitting(false);
  };

  return (
    <div className="max-w-xl mx-auto p-4 sm:p-8 bg-white rounded-xl shadow-2xl">
      <button
        onClick={onBack}
        className="text-indigo-600 hover:text-indigo-800 flex items-center mb-6 transition duration-150"
      >
        <ArrowLeft className="w-5 h-5 mr-1" />
        Retour aux Profils
      </button>
      
      <h1 className="text-2xl font-extrabold text-gray-900 mb-1">
        {isEditing ? 'Modifier le Profil' : 'Nouveau Profil d\'Enfant'}
      </h1>
      <p className="text-gray-600 mb-8">
        {isEditing ? 'Modifiez les informations du profil de l\'enfant' : 'Créez un nouveau profil pour documenter les observations'}
      </p>
      
      <form onSubmit={handleSubmit}>
        <div className="mb-4">
          <label className="block text-sm font-medium text-gray-700 mb-1">
            Nom de l'enfant <span className="text-red-500">*</span>
          </label>
          <input
            type="text"
            value={formData.name}
            onChange={(e) => handleInputChange('name', e.target.value)}
            className="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
            required
            placeholder="Prénom Nom"
          />
        </div>

        <div className="mb-4">
          <label className="block text-sm font-medium text-gray-700 mb-1">
            Date de naissance
          </label>
          <input
            type="date"
            value={formData.birth_date}
            onChange={(e) => handleInputChange('birth_date', e.target.value)}
            className="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
          />
        </div>

        <div className="mb-4">
          <label className="block text-sm font-medium text-gray-700 mb-1">
            Niveau/Classe
          </label>
          <input
            type="text"
            value={formData.class_level}
            onChange={(e) => handleInputChange('class_level', e.target.value)}
            className="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
            placeholder="Ex: PS, MS, GS, CP..."
          />
        </div>

        <div className="mb-6">
          <label className="block text-sm font-medium text-gray-700 mb-1">
            Notes particulières
          </label>
          <textarea
            rows={4}
            value={formData.notes}
            onChange={(e) => handleInputChange('notes', e.target.value)}
            className="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
            placeholder="Informations importantes, besoins particuliers, contexte familial..."
          />
        </div>

        <button
          type="submit"
          disabled={isSubmitting}
          className="w-full bg-indigo-600 text-white p-3 rounded-lg font-semibold shadow-lg hover:bg-indigo-700 transition duration-150 transform hover:scale-[1.01] disabled:opacity-50 disabled:cursor-not-allowed"
        >
          {isSubmitting ? 'Enregistrement...' : (isEditing ? 'Modifier le Profil' : 'Créer le Profil')}
        </button>
      </form>
    </div>
  );
}

================================================================================
12. COMPOSANT OBSERVATION FORM - src/react-app/components/ObservationForm.tsx
================================================================================

import { useState } from 'react';
import { ArrowLeft } from 'lucide-react';
import { Activity, CreateObservationRequest, ObservationDetails, Child } from '@/shared/types';

interface ObservationFormProps {
  activity: Activity;
  onSubmit: (observation: CreateObservationRequest) => Promise<boolean>;
  onBack: () => void;
  children: Child[];
}

export default function ObservationForm({ activity, onSubmit, onBack, children }: ObservationFormProps) {
  const [formData, setFormData] = useState<ObservationDetails>({});
  const [observationDate, setObservationDate] = useState(
    new Date().toISOString().substring(0, 16)
  );
  const [selectedChildId, setSelectedChildId] = useState<number | undefined>(undefined);
  const [isSubmitting, setIsSubmitting] = useState(false);

  const handleInputChange = (fieldName: string, value: string | number) => {
    setFormData(prev => ({
      ...prev,
      [fieldName]: value
    }));
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    
    if (!selectedChildId) {
      alert('Veuillez sélectionner un enfant avant de soumettre l\'observation.');
      return;
    }
    
    setIsSubmitting(true);
    
    const observation: CreateObservationRequest = {
      activity_id: activity.id,
      observation_date: observationDate,
      details: formData,
      child_id: selectedChildId
    };

    const success = await onSubmit(observation);
    
    if (success) {
      // Reset form on success
      setFormData({});
      setObservationDate(new Date().toISOString().substring(0, 16));
      setSelectedChildId(undefined);
    }
    
    setIsSubmitting(false);
  };

  return (
    <div className="max-w-xl mx-auto p-4 sm:p-8 bg-white rounded-xl shadow-2xl">
      <button
        onClick={onBack}
        className="text-indigo-600 hover:text-indigo-800 flex items-center mb-6 transition duration-150"
      >
        <ArrowLeft className="w-5 h-5 mr-1" />
        Retour aux Domaines
      </button>
      
      <h1 className="text-2xl font-extrabold text-gray-900 mb-1">
        Observation: {activity.name}
      </h1>
      <p className="text-gray-600 mb-8">{activity.description}</p>
      
      <form onSubmit={handleSubmit}>
        <div className="mb-4">
          <label className="block text-sm font-medium text-gray-700 mb-1">
            Enfant observé
            <span className="text-red-500 ml-1">*</span>
          </label>
          <select
            value={selectedChildId || ''}
            onChange={(e) => setSelectedChildId(e.target.value ? parseInt(e.target.value) : undefined)}
            className="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
            required
          >
            <option value="">Sélectionnez un enfant</option>
            {children.map((child) => (
              <option key={child.id} value={child.id}>
                {child.name} {child.class_level ? `(${child.class_level})` : ''}
              </option>
            ))}
          </select>
        </div>

        <div className="mb-4">
          <label className="block text-sm font-medium text-gray-700 mb-1">
            Date et Heure
          </label>
          <input
            type="datetime-local"
            value={observationDate}
            onChange={(e) => setObservationDate(e.target.value)}
            className="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 bg-gray-50"
            required
          />
        </div>

        {activity.fields.map((field) => (
          <div key={field.name} className="mb-4">
            <label htmlFor={field.name} className="block text-sm font-medium text-gray-700 mb-1">
              {field.label}
              {field.required && <span className="text-red-500 ml-1">*</span>}
            </label>
            
            {field.type === 'textarea' ? (
              <textarea
                id={field.name}
                name={field.name}
                rows={3}
                value={formData[field.name] || ''}
                onChange={(e) => handleInputChange(field.name, e.target.value)}
                className="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
                required={field.required}
              />
            ) : (
              <input
                type={field.type}
                id={field.name}
                name={field.name}
                value={formData[field.name] || ''}
                onChange={(e) => handleInputChange(
                  field.name, 
                  field.type === 'number' ? parseFloat(e.target.value) || 0 : e.target.value
                )}
                className="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
                required={field.required}
                step={field.type === 'number' ? 'any' : undefined}
              />
            )}
          </div>
        ))}

        <button
          type="submit"
          disabled={isSubmitting || !selectedChildId}
          className="w-full bg-indigo-600 text-white p-3 rounded-lg font-semibold shadow-lg hover:bg-indigo-700 transition duration-150 transform hover:scale-[1.01] disabled:opacity-50 disabled:cursor-not-allowed"
        >
          {isSubmitting ? 'Enregistrement...' : "Enregistrer l'Observation"}
        </button>
      </form>
    </div>
  );
}

================================================================================
13. COMPOSANT OBSERVATION CARD - src/react-app/components/ObservationCard.tsx
================================================================================

import { Trash2, User, Calendar, BookOpen } from 'lucide-react';
import { Observation, Activity, Child } from '@/shared/types';
import { getActivityColors } from '@/react-app/utils/activityColors';

interface ObservationCardProps {
  observation: Observation;
  activity: Activity | undefined;
  child: Child | undefined;
  onDelete: () => void;
}

export default function ObservationCard({ observation, activity, child, onDelete }: ObservationCardProps) {
  const colors = getActivityColors(observation.activity_id);
  
  const formatDate = (dateString: string) => {
    return new Date(dateString).toLocaleString('fr-FR', {
      year: 'numeric',
      month: 'short',
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });
  };

  const calculateAge = (birthDate: string) => {
    const birth = new Date(birthDate);
    const today = new Date();
    let age = today.getFullYear() - birth.getFullYear();
    const monthDiff = today.getMonth() - birth.getMonth();
    
    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {
      age--;
    }
    
    return age;
  };

  return (
    <div className="bg-white p-6 rounded-xl border border-gray-200 hover:bg-gray-50 transition duration-150 relative observation-card">
      {/* En-tête avec profil enfant */}
      <div className="flex items-start justify-between mb-4">
        <div className="flex items-center space-x-3">
          <div className="bg-indigo-100 p-2 rounded-lg">
            <User className="w-5 h-5 text-indigo-600" />
          </div>
          <div>
            <h3 className="text-lg font-bold text-indigo-700">{child?.name || 'Enfant inconnu'}</h3>
            <div className="flex items-center space-x-4 text-sm text-gray-600">
              {child?.birth_date && (
                <span className="flex items-center">
                  <Calendar className="w-3 h-3 mr-1" />
                  {calculateAge(child.birth_date)} ans
                </span>
              )}
              {child?.class_level && (
                <span className="flex items-center">
                  <BookOpen className="w-3 h-3 mr-1" />
                  {child.class_level}
                </span>
              )}
            </div>
          </div>
        </div>
        <div className="no-print flex space-x-2">
          <button
            onClick={onDelete}
            className="text-red-500 hover:text-red-700 p-1 rounded-full transition duration-150"
            title="Supprimer"
          >
            <Trash2 className="w-4 h-4" />
          </button>
        </div>
      </div>

      {/* Activité observée */}
      <div className={`${colors.bg} p-4 rounded-lg mb-4 ${colors.border} border-l-4`}>
        <div className="flex items-center mb-2">
          {activity && (
            <span 
              className={`${colors.iconColor} mr-2`}
              dangerouslySetInnerHTML={{ __html: activity.icon }}
            />
          )}
          <h4 className={`text-md font-semibold ${colors.text}`}>{observation.activity_name}</h4>
        </div>
        <p className="text-sm text-gray-600">
          Observé le {formatDate(observation.observation_date)}
        </p>
      </div>

      {/* Notes du profil enfant si disponibles */}
      {child?.notes && (
        <div className="bg-amber-50 border-l-4 border-amber-200 p-3 mb-4 rounded-r-lg">
          <p className="text-sm text-amber-800">
            <span className="font-medium">Notes sur l'enfant:</span> {child.notes}
          </p>
        </div>
      )}

      {/* Détails de l'observation */}
      <div className="space-y-3">
        <h5 className="text-sm font-medium text-gray-700 mb-2">Observations détaillées:</h5>
        {Object.entries(observation.details).map(([key, value]) => {
          if (value && value !== '') {
            const fieldDef = activity?.fields.find(f => f.name === key);
            const label = fieldDef ? fieldDef.label : key;
            return (
              <div key={key} className={`${colors.bg} p-3 rounded-lg border-l-4 ${colors.border}`}>
                <p className="text-sm">
                  <span className="font-medium text-gray-700">{label}:</span>{' '}
                  <span className="text-gray-600">{value}</span>
                </p>
              </div>
            );
          }
          return null;
        })}
      </div>
    </div>
  );
}

================================================================================
14. COMPOSANT OBSERVATION CATALOG - src/react-app/components/ObservationCatalog.tsx
================================================================================

import { useState, useMemo } from 'react';
import { Search, Filter, User, Calendar, ChevronDown } from 'lucide-react';
import ObservationCard from './ObservationCard';
import { Observation, Activity, Child } from '@/shared/types';
import { getActivityColors } from '@/react-app/utils/activityColors';

interface ObservationCatalogProps {
  observations: Observation[];
  activities: Activity[];
  children: Child[];
  onDeleteObservation: (id: number) => void;
}

export default function ObservationCatalog({ 
  observations, 
  activities, 
  children, 
  onDeleteObservation 
}: ObservationCatalogProps) {
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedChild, setSelectedChild] = useState<string>('all');
  const [selectedActivity, setSelectedActivity] = useState<string>('all');
  const [showActivityDropdown, setShowActivityDropdown] = useState(false);

  // Obtenir les activités disponibles pour l'enfant sélectionné
  const availableActivities = useMemo(() => {
    if (selectedChild === 'all') {
      return activities;
    }
    const childObservations = observations.filter(obs => obs.child_id.toString() === selectedChild);
    const childActivityIds = [...new Set(childObservations.map(obs => obs.activity_id))];
    return activities.filter(activity => childActivityIds.includes(activity.id));
  }, [selectedChild, observations, activities]);

  // Filtrer les observations
  const filteredObservations = observations.filter(observation => {
    const matchesSearch = searchTerm === '' || 
      observation.activity_name.toLowerCase().includes(searchTerm.toLowerCase()) ||
      children.find(c => c.id === observation.child_id)?.name.toLowerCase().includes(searchTerm.toLowerCase());
    
    const matchesChild = selectedChild === 'all' || observation.child_id.toString() === selectedChild;
    const matchesActivity = selectedActivity === 'all' || observation.activity_id === selectedActivity;

    return matchesSearch && matchesChild && matchesActivity;
  });

  // Grouper les observations par enfant
  const observationsByChild = filteredObservations.reduce((acc, observation) => {
    const childId = observation.child_id.toString();
    if (!acc[childId]) {
      acc[childId] = [];
    }
    acc[childId].push(observation);
    return acc;
  }, {} as Record<string, Observation[]>);

  return (
    <div className="space-y-6">
      {/* Filtres et recherche */}
      <div className="bg-white p-6 rounded-xl border border-gray-200 shadow-sm">
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          {/* Barre de recherche */}
          <div className="relative">
            <Search className="absolute left-3 top-3 h-4 w-4 text-gray-400" />
            <input
              type="text"
              placeholder="Rechercher par nom d'enfant ou activité..."
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
            />
          </div>

          {/* Filtre par enfant */}
          <div className="relative">
            <User className="absolute left-3 top-3 h-4 w-4 text-gray-400" />
            <select
              value={selectedChild}
              onChange={(e) => setSelectedChild(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
            >
              <option value="all">Tous les enfants</option>
              {children.map(child => (
                <option key={child.id} value={child.id?.toString()}>
                  {child.name}
                </option>
              ))}
            </select>
          </div>

          {/* Menu déroulant des activités par enfant */}
          <div className="relative">
            <button
              onClick={() => setShowActivityDropdown(!showActivityDropdown)}
              className="w-full px-4 py-2 text-left border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white flex items-center justify-between"
            >
              <div className="flex items-center">
                <Filter className="w-4 h-4 text-gray-400 mr-2" />
                <span className="text-gray-700">
                  {selectedChild === 'all' 
                    ? 'Activités par enfant' 
                    : `Activités de ${children.find(c => c.id?.toString() === selectedChild)?.name || ''}`
                  }
                </span>
              </div>
              <ChevronDown className={`w-4 h-4 text-gray-400 transition-transform ${showActivityDropdown ? 'rotate-180' : ''}`} />
            </button>
            
            {showActivityDropdown && (
              <div className="absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-80 overflow-y-auto">
                <div className="p-2">
                  <button
                    onClick={() => {
                      setSelectedChild('all');
                      setSelectedActivity('all');
                      setShowActivityDropdown(false);
                    }}
                    className="w-full text-left px-3 py-2 rounded hover:bg-gray-50 text-sm"
                  >
                    Tous les enfants - Toutes les activités
                  </button>
                </div>
                <div className="border-t border-gray-200">
                  {children.map(child => {
                    const childObservations = observations.filter(obs => obs.child_id === child.id);
                    const childActivities = [...new Set(childObservations.map(obs => obs.activity_id))]
                      .map(activityId => activities.find(a => a.id === activityId))
                      .filter(Boolean);
                    
                    if (childActivities.length === 0) return null;
                    
                    return (
                      <div key={child.id} className="border-b border-gray-100 last:border-b-0">
                        <div className="px-3 py-2 bg-gray-50 font-medium text-sm text-gray-700 flex items-center">
                          <User className="w-3 h-3 mr-2" />
                          {child.name} ({childActivities.length} activité{childActivities.length > 1 ? 's' : ''})
                        </div>
                        <div className="pl-6">
                          <button
                            onClick={() => {
                              setSelectedChild(child.id?.toString() || '');
                              setSelectedActivity('all');
                              setShowActivityDropdown(false);
                            }}
                            className="w-full text-left px-3 py-2 text-sm hover:bg-indigo-50 hover:text-indigo-700"
                          >
                            Toutes ses activités ({childObservations.length} observations)
                          </button>
                          {childActivities.map(activity => {
                            const activityObservations = childObservations.filter(obs => obs.activity_id === activity?.id);
                            return (
                              <button
                                key={activity?.id}
                                onClick={() => {
                                  setSelectedChild(child.id?.toString() || '');
                                  setSelectedActivity(activity?.id || '');
                                  setShowActivityDropdown(false);
                                }}
                                className="w-full text-left px-3 py-2 text-sm hover:bg-indigo-50 hover:text-indigo-700 pl-6"
                              >
                                • {activity?.name} ({activityObservations.length} observations)
                              </button>
                            );
                          })}
                        </div>
                      </div>
                    );
                  })}
                </div>
              </div>
            )}
          </div>

          {/* Filtre par activité classique */}
          <div className="relative">
            <Filter className="absolute left-3 top-3 h-4 w-4 text-gray-400" />
            <select
              value={selectedActivity}
              onChange={(e) => setSelectedActivity(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
            >
              <option value="all">Toutes les activités</option>
              {availableActivities.map(activity => (
                <option key={activity.id} value={activity.id}>
                  {activity.name}
                </option>
              ))}
            </select>
          </div>
        </div>

        {/* Compteurs et filtres actifs */}
        <div className="mt-4 pt-4 border-t border-gray-200">
          <div className="flex items-center justify-between">
            <p className="text-sm text-gray-600">
              {filteredObservations.length} observation(s) trouvée(s) sur {observations.length} total
            </p>
            <p className="text-sm text-gray-600">
              {Object.keys(observationsByChild).length} enfant(s) concerné(s)
            </p>
          </div>
          
          {/* Filtres actifs */}
          {(selectedChild !== 'all' || selectedActivity !== 'all' || searchTerm !== '') && (
            <div className="flex items-center gap-2 mt-2">
              <span className="text-xs text-gray-500">Filtres actifs:</span>
              {selectedChild !== 'all' && (
                <span className="inline-flex items-center px-2 py-1 rounded-full text-xs bg-indigo-100 text-indigo-800">
                  {children.find(c => c.id?.toString() === selectedChild)?.name}
                  <button
                    onClick={() => setSelectedChild('all')}
                    className="ml-1 text-indigo-600 hover:text-indigo-800"
                  >
                    ×
                  </button>
                </span>
              )}
              {selectedActivity !== 'all' && (
                (() => {
                  const activityColors = getActivityColors(selectedActivity);
                  return (
                    <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs ${activityColors.badgeBg} ${activityColors.badgeText}`}>
                      {activities.find(a => a.id === selectedActivity)?.name}
                      <button
                        onClick={() => setSelectedActivity('all')}
                        className={`ml-1 ${activityColors.text} hover:opacity-80`}
                      >
                        ×
                      </button>
                    </span>
                  );
                })()
              )}
              {searchTerm !== '' && (
                <span className="inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-100 text-green-800">
                  "{searchTerm}"
                  <button
                    onClick={() => setSearchTerm('')}
                    className="ml-1 text-green-600 hover:text-green-800"
                  >
                    ×
                  </button>
                </span>
              )}
            </div>
          )}
        </div>
      </div>

      {/* Résultats groupés par enfant */}
      {Object.keys(observationsByChild).length === 0 ? (
        <div className="text-center p-12 bg-gray-50 rounded-lg">
          <p className="text-gray-500">Aucune observation ne correspond à vos critères de recherche.</p>
        </div>
      ) : (
        <div className="space-y-8">
          {Object.entries(observationsByChild).map(([childId, childObservations]) => {
            const child = children.find(c => c.id?.toString() === childId);
            if (!child) return null;

            return (
              <div key={childId} className="space-y-4">
                {/* En-tête de l'enfant */}
                <div className="bg-gradient-to-r from-indigo-50 to-purple-50 p-4 rounded-lg border border-indigo-200">
                  <div className="flex items-center justify-between">
                    <div className="flex items-center space-x-3">
                      <div className="bg-indigo-100 p-2 rounded-full">
                        <User className="w-5 h-5 text-indigo-600" />
                      </div>
                      <div>
                        <h3 className="text-lg font-semibold text-indigo-900">{child.name}</h3>
                        <div className="flex items-center space-x-4 text-sm text-indigo-600">
                          {child.birth_date && (
                            <span className="flex items-center">
                              <Calendar className="w-3 h-3 mr-1" />
                              {new Date().getFullYear() - new Date(child.birth_date).getFullYear()} ans
                            </span>
                          )}
                          {child.class_level && <span>{child.class_level}</span>}
                        </div>
                      </div>
                    </div>
                    <div className="text-right">
                      <span className="bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm font-medium">
                        {childObservations.length} observation(s)
                      </span>
                    </div>
                  </div>
                </div>

                {/* Observations de l'enfant */}
                <div className="grid gap-4 ml-4">
                  {childObservations
                    .sort((a, b) => new Date(b.observation_date).getTime() - new Date(a.observation_date).getTime())
                    .map((observation) => {
                      const activity = activities.find(a => a.id === observation.activity_id);
                      return (
                        <ObservationCard
                          key={observation.id}
                          observation={observation}
                          activity={activity}
                          child={child}
                          onDelete={() => observation.id && onDeleteObservation(observation.id)}
                        />
                      );
                    })}
                </div>
              </div>
            );
          })}
        </div>
      )}
    </div>
  );
}

================================================================================
15. COMPOSANT MODAL - src/react-app/components/Modal.tsx
================================================================================

interface ModalAction {
  text: string;
  onClick: () => void;
  style: string;
}

interface ModalProps {
  isOpen: boolean;
  title: string;
  message: string;
  actions: ModalAction[];
  onClose: () => void;
}

export default function Modal({ isOpen, title, message, actions }: ModalProps) {
  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50">
      <div className="bg-white p-6 rounded-xl shadow-2xl max-w-sm w-full mx-4 transform transition-all scale-100">
        <h3 className="text-xl font-semibold mb-4 text-gray-900">{title}</h3>
        <p className="text-gray-700 mb-6">{message}</p>
        <div className="flex justify-end space-x-3">
          {actions.map((action, index) => (
            <button
              key={index}
              onClick={action.onClick}
              className={`px-4 py-2 text-sm font-medium text-white rounded-lg shadow-md transition duration-150 ${action.style}`}
            >
              {action.text}
            </button>
          ))}
        </div>
      </div>
    </div>
  );
}

================================================================================
16. HOOK USE CHILDREN - src/react-app/hooks/useChildren.ts
================================================================================

import { useState, useEffect } from 'react';
import { Child, CreateChildRequest } from '@/shared/types';

export function useChildren() {
  const [children, setChildren] = useState<Child[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  const fetchChildren = async () => {
    try {
      setLoading(true);
      const response = await fetch('/api/children');
      if (!response.ok) {
        throw new Error('Failed to fetch children');
      }
      const data = await response.json();
      setChildren(data);
      setError(null);
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
    } finally {
      setLoading(false);
    }
  };

  const createChild = async (child: CreateChildRequest) => {
    try {
      const response = await fetch('/api/children', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(child),
      });

      if (!response.ok) {
        throw new Error('Failed to create child profile');
      }

      // Refresh the children list
      await fetchChildren();
      return true;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return false;
    }
  };

  const updateChild = async (id: number, child: CreateChildRequest) => {
    try {
      const response = await fetch(`/api/children/${id}`, {
        method: 'PUT',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(child),
      });

      if (!response.ok) {
        throw new Error('Failed to update child profile');
      }

      // Refresh the children list
      await fetchChildren();
      return true;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return false;
    }
  };

  const deleteChild = async (id: number) => {
    try {
      const response = await fetch(`/api/children/${id}`, {
        method: 'DELETE',
      });

      if (!response.ok) {
        throw new Error('Failed to delete child profile');
      }

      // Refresh the children list
      await fetchChildren();
      return true;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return false;
    }
  };

  useEffect(() => {
    fetchChildren();
  }, []);

  return {
    children,
    loading,
    error,
    createChild,
    updateChild,
    deleteChild,
    refetch: fetchChildren,
  };
}

================================================================================
17. HOOK USE OBSERVATIONS - src/react-app/hooks/useObservations.ts
================================================================================

import { useState, useEffect } from 'react';
import { Observation, CreateObservationRequest } from '@/shared/types';

export function useObservations() {
  const [observations, setObservations] = useState<Observation[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  const fetchObservations = async () => {
    try {
      setLoading(true);
      const response = await fetch('/api/observations');
      if (!response.ok) {
        throw new Error('Failed to fetch observations');
      }
      const data = await response.json();
      setObservations(data);
      setError(null);
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
    } finally {
      setLoading(false);
    }
  };

  const createObservation = async (observation: CreateObservationRequest) => {
    try {
      const response = await fetch('/api/observations', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(observation),
      });

      if (!response.ok) {
        throw new Error('Failed to create observation');
      }

      // Refresh the observations list
      await fetchObservations();
      return true;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return false;
    }
  };

  const deleteObservation = async (id: number) => {
    try {
      const response = await fetch(`/api/observations/${id}`, {
        method: 'DELETE',
      });

      if (!response.ok) {
        throw new Error('Failed to delete observation');
      }

      // Refresh the observations list
      await fetchObservations();
      return true;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return false;
    }
  };

  useEffect(() => {
    fetchObservations();
  }, []);

  return {
    observations,
    loading,
    error,
    createObservation,
    deleteObservation,
    refetch: fetchObservations,
  };
}

================================================================================
18. DONNÉES DES ACTIVITÉS - src/react-app/data/activities.ts
================================================================================

import { Activity } from '@/shared/types';

export const ACTIVITIES: Activity[] = [
  {
    id: 'langage',
    name: "Le Langage",
    description: "Observation de la communication verbale, non-verbale et de la compréhension.",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-message-square"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><path d="M7 10h10"/><path d="M7 14h10"/></svg>`,
    fields: [
      { name: 'observed_communication', label: "Description de la communication observée", type: 'textarea', required: true },
      { name: 'context', label: "Contexte de l'échange", type: 'text', required: false },
      { name: 'vocabulary_level', label: "Niveau de vocabulaire utilisé", type: 'text', required: false }
    ]
  },
  {
    id: 'social',
    name: "L'Intégration Sociale",
    description: "Évaluation des interactions avec les pairs et les adultes.",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users"><path d="M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13V2"/></svg>`,
    fields: [
      { name: 'interaction_type', label: "Type d'interaction (proche, distant, conflit)", type: 'text', required: true },
      { name: 'peer_response', label: "Réponse des pairs", type: 'text', required: false },
      { name: 'group_behavior', label: "Comportement en groupe", type: 'textarea', required: false }
    ]
  },
  {
    id: 'attention',
    name: "L'Attention",
    description: "Capacité à se concentrer sur une tâche ou une activité spécifique.",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-target"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>`,
    fields: [
      { name: 'focus_duration', label: "Durée de l'attention (estimation en minutes)", type: 'number', required: true },
      { name: 'distractions', label: "Éléments de distraction observés", type: 'text', required: false },
      { name: 'task_engagement', label: "Niveau d'engagement dans la tâche", type: 'textarea', required: false }
    ]
  },
  {
    id: 'motricite',
    name: "Les Capacités Motrices",
    description: "Observation de la motricité fine (préhension) et globale (mouvements du corps).",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-dumbbell"><path d="m14.4 14.4-2.8-2.8a2 2 0 0 0-2.8 0L6.4 14.4"/><path d="m14.4 9.6 2.8 2.8a2 2 0 0 0 2.8 0L21.6 9.6"/><path d="m9.6 14.4-2.8 2.8a2 2 0 0 0 0 2.8l2.8 2.8"/><path d="m9.6 9.6-2.8-2.8a2 2 0 0 0 0-2.8L9.6 2.4"/></svg>`,
    fields: [
      { name: 'motor_type', label: "Type de motricité observée (Fine ou Globale)", type: 'text', required: true },
      { name: 'observed_movement', label: "Description détaillée du mouvement", type: 'textarea', required: true },
      { name: 'difficulty_level', label: "Niveau de difficulté perçu", type: 'text', required: false }
    ]
  },
  {
    id: 'jeux',
    name: "Les Jeux et Activités",
    description: "Observation des types de jeux, de la créativité et de la participation.",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-toy-brick"><rect x="3" y="8" width="18" height="12" rx="2"/><path d="M10 8V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v3"/><path d="M6 8V5a2 2 0 0 0-2-2h-2"/></svg>`,
    fields: [
      { name: 'game_type', label: "Type de jeu (individuel, collaboratif, symbolique)", type: 'text', required: true },
      { name: 'participation_level', label: "Degré de participation et d'initiative", type: 'text', required: false },
      { name: 'notes', label: "Description de l'activité ou du jeu", type: 'textarea', required: false }
    ]
  },
  {
    id: 'autonomie',
    name: "L'Autonomie",
    description: "Observation des capacités d'autonomie (habillage, hygiène, gestion des affaires).",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-hand-platter"><path d="M12 21v-4"/><path d="M22 17a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2h20v-2z"/><path d="M12 13v-2.5a3.5 3.5 0 1 0-7 0V13"/><path d="M12 13v-2.5a3.5 3.5 0 1 1 7 0V13"/></svg>`,
    fields: [
      { name: 'task_completed', label: "Tâche d'autonomie observée", type: 'text', required: true },
      { name: 'assistance_needed', label: "Assistance requise (Oui/Non/Partielle)", type: 'text', required: false },
      { name: 'self_management', label: "Notes sur la gestion de soi et l'initiative", type: 'textarea', required: false }
    ]
  }
];

================================================================================
19. UTILITAIRES COULEURS - src/react-app/utils/activityColors.ts
================================================================================

// Mapping des couleurs pour chaque activité
export const ACTIVITY_COLORS = {
  langage: {
    bg: 'bg-blue-50',
    border: 'border-blue-200',
    text: 'text-blue-700',
    accent: 'bg-blue-100',
    iconColor: 'text-blue-600',
    badgeBg: 'bg-blue-100',
    badgeText: 'text-blue-800',
    hoverBg: 'hover:bg-blue-100'
  },
  social: {
    bg: 'bg-emerald-50',
    border: 'border-emerald-200',
    text: 'text-emerald-700',
    accent: 'bg-emerald-100',
    iconColor: 'text-emerald-600',
    badgeBg: 'bg-emerald-100',
    badgeText: 'text-emerald-800',
    hoverBg: 'hover:bg-emerald-100'
  },
  attention: {
    bg: 'bg-violet-50',
    border: 'border-violet-200',
    text: 'text-violet-700',
    accent: 'bg-violet-100',
    iconColor: 'text-violet-600',
    badgeBg: 'bg-violet-100',
    badgeText: 'text-violet-800',
    hoverBg: 'hover:bg-violet-100'
  },
  motricite: {
    bg: 'bg-orange-50',
    border: 'border-orange-200',
    text: 'text-orange-700',
    accent: 'bg-orange-100',
    iconColor: 'text-orange-600',
    badgeBg: 'bg-orange-100',
    badgeText: 'text-orange-800',
    hoverBg: 'hover:bg-orange-100'
  },
  jeux: {
    bg: 'bg-pink-50',
    border: 'border-pink-200',
    text: 'text-pink-700',
    accent: 'bg-pink-100',
    iconColor: 'text-pink-600',
    badgeBg: 'bg-pink-100',
    badgeText: 'text-pink-800',
    hoverBg: 'hover:bg-pink-100'
  },
  autonomie: {
    bg: 'bg-amber-50',
    border: 'border-amber-200',
    text: 'text-amber-700',
    accent: 'bg-amber-100',
    iconColor: 'text-amber-600',
    badgeBg: 'bg-amber-100',
    badgeText: 'text-amber-800',
    hoverBg: 'hover:bg-amber-100'
  }
};

export function getActivityColors(activityId: string) {
  return ACTIVITY_COLORS[activityId as keyof typeof ACTIVITY_COLORS] || {
    bg: 'bg-gray-50',
    border: 'border-gray-200',
    text: 'text-gray-700',
    accent: 'bg-gray-100',
    iconColor: 'text-gray-600',
    badgeBg: 'bg-gray-100',
    badgeText: 'text-gray-800',
    hoverBg: 'hover:bg-gray-100'
  };
}

================================================================================
20. CONFIGURATION TAILWIND - tailwind.config.js
================================================================================

/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/react-app/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {},
  },
  plugins: [],
};

================================================================================
21. CONFIGURATION ESLINT - eslint.config.js
================================================================================

import js from "@eslint/js";
import globals from "globals";
import reactHooks from "eslint-plugin-react-hooks";
import reactRefresh from "eslint-plugin-react-refresh";
import tseslint from "typescript-eslint";

export default tseslint.config(
  { ignores: ["dist", "./worker-configuration.d.ts"] },
  {
    extends: [js.configs.recommended, ...tseslint.configs.recommended],
    files: ["**/*.{ts,tsx}"],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
    },
    plugins: {
      "react-hooks": reactHooks,
      "react-refresh": reactRefresh,
    },
    rules: {
      ...reactHooks.configs.recommended.rules,
      "react-refresh/only-export-components": [
        "warn",
        { allowConstantExport: true },
      ],
    },
  }
);

================================================================================
22. SCHÉMA DE BASE DE DONNÉES
================================================================================

CREATE TABLE observations (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  activity_id TEXT NOT NULL,
  activity_name TEXT NOT NULL,
  observation_date DATETIME NOT NULL,
  observer_id TEXT NOT NULL,
  details TEXT NOT NULL,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  child_id INTEGER
);

CREATE TABLE children (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  birth_date DATE,
  class_level TEXT,
  notes TEXT,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

================================================================================
FIN DU CODE SOURCE - APPLICATION ARGILE-B
================================================================================

Cette application web complète permet de gérer les observations pédagogiques 
du développement des enfants dans 6 domaines clés :

1. Le Langage - Communication verbale et non-verbale
2. L'Intégration Sociale - Interactions avec pairs et adultes  
3. L'Attention - Capacité de concentration
4. Les Capacités Motrices - Motricité fine et globale
5. Les Jeux et Activités - Créativité et participation
6. L'Autonomie - Capacités d'autonomie personnelle

Fonctionnalités principales :
- Gestion des profils d'enfants
- Création d'observations structurées par domaine
- Catalogue de recherche et filtrage des observations
- Interface responsive avec couleurs distinctives par activité
- Génération de rapports PDF
- Base de données SQLite/D1 pour la persistance
- Architecture moderne avec React, TypeScript, Tailwind CSS, Hono
- Déploiement sur Cloudflare Workers

L'application est conçue pour les professionnels de l'éducation et de la 
petite enfance souhaitant documenter et suivre le développement des enfants
de manière structurée et professionnelle.
